import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import Docs from '@/docs';

import { Money } from './Money';
import * as Stories from './Money.stories';

<Meta of={Stories} />

<Docs.ComponentHeading of="Money" />

A form control that allows users to enter a monetary amount.

The displayed value is automatically formatted according to the specified
configuration, though will "deformat" as you edit the field, since it can feel
disorienting when the changes don’t match your keystrokes.

<Docs.FauxCanvas>
  <Money defaultValue="1234567.89" />
</Docs.FauxCanvas>

<Docs.TableOfContents />

<Docs.Props of={Stories} nativeBase="input" wrapper="Field" />
<Docs.ControlStates
  of={Stories}
  valuable
  note={`
    Note: when controlled, <ComponentName of="Money" /> behaves slightly
    differently from other form controls. Since the input’s value needs to be
    disconnected from the controlled \`value\` to enable currency formatting,
    the input’s value can change even if you aren’t passing in the new
    controlled value. However, if you do pass in a numerically different
    controlled value, everything will cascade accordingly.
  `}
/>

## Currency formatting & constraints

To customize the currency format, you can use a combination of the
`currencySymbol`, `decimalPoint`, and `thousandsSeparator` props. They all use
USD defaults.

The `decimalPlaces` prop defaults to `2` and configures:

- the maximum number of decimal places the user can enter
- the number of "placeholder" decimal places that are suggested as you type
- the number of decimal places always included on `onChange(event.target.value)`

<Canvas
  of={Stories.CurrencyConversion}
  source={{
    language: 'tsx',
    code: Stories.CurrencyConversion.parameters.source,
  }}
/>

By default, negative values are not allowed, since typically, a monetary field
is either positive (like in a deposit form), or negative represented with a
positive value (like in a withdrawal form). However, you can allow negatives
using the `allowNegatives` prop.

Keep in mind that if you allow negatives, the user won’t be able to use the
simpler numeric keyboard on mobile devices, since it doesn’t include a key for
the negative sign.

<Canvas of={Stories.AllowNegatives} />

## Working with the value

TODO

<Docs.Sizers of={Stories} wrapper="Field" />
<Docs.FormLibraryCompatibility
  of={Stories}
  fieldName="greensFees"
  initialValue="137.00"
  component={Money}
  componentProps={{
    label: 'Greens fees',
    hint: 'Try editting me!',
  }}
/>
